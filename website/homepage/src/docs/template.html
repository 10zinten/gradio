<!DOCTYPE html>
<html lang="en">
  <head>
    {% with title="Gradio Docs", url="https://gradio.app/docs", image="/assets/img/meta-image.png", description="Browse Gradio Documentation and Examples" %}
      {% include "templates/meta.html" %}
    {% endwith %}
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/assets/prism.css">
  </head>
  <body>
    {% include "templates/navbar.html" %}
    <main class="container mx-auto px-4 flex flex-row-reverse">
      <div class="flex flex-row">
      <p class="pl-4 pr-1 py-1 mb-1 w-fit text-gray-600 font-semibold">
        gradio 
        <div class="flex flex-col py-1 mb-2 bg-gray-50 rounded-lg">
          <button 
          class="h-2/4 link px-3 text-gray-600 selected-version"
          onclick="this.classList.add('selected-version'); this.nextElementSibling.classList.remove('selected-version'); document.querySelector('#git-docs').classList.add('hidden'); document.querySelector('#pip-docs').classList.remove('hidden');">
          {{ pip_filename[:-14] }}
          </button>
          <button 
          class="h-2/4 link px-3 text-gray-600"
          onclick="this.classList.add('selected-version'); this.previousElementSibling.classList.remove('selected-version'); document.querySelector('#pip-docs').classList.add('hidden'); document.querySelector('#git-docs').classList.remove('hidden')";
          >
          git
          </button>
        </div>
      </p>
    </div>
    </main>
    <div id="pip-docs">
      {% include "docs/"+pip_filename %}
    </div>
    <div id="git-docs"  class="hidden">
      {% include "docs/main_template.html" %}
    </div>
    <script src="/assets/prism.js"></script>
    <script>
      window.__gradio_mode__ = "website";
    </script>
    <script type="module" src="/assets/index.js"></script>
    {% include 'templates/footer.html' %}
    <script>{% include 'templates/guide-color.js' %}</script>
    <script>{% include 'templates/add_anchors.js' %}</script>
    <script>{% include 'templates/add_copy.js' %}</script>

    <script>
    const show_demo = (component, demo) => {
      document.querySelectorAll(`#${component} .demo-btn.selected-demo`).forEach(n => n.classList.remove('selected-demo'));
      document.querySelectorAll(`#${component} .demo-content`).forEach(n => n.classList.add('hidden'));
      document.querySelector(`#${component} .demo-btn[name=${demo}]`).classList.add('selected-demo');
      document.querySelectorAll(`#${component} .demo-content[name=${demo}]`).forEach(n => n.classList.remove('hidden'));
    }
    window.onclick = function(event) {
      if (event.target.classList.contains('demo-window')) {
        document.querySelectorAll('.demo-window').forEach(n => n.classList.add('hidden'));
      }
    }

    let mainNavLinks = document.querySelectorAll(".navigation a");
    window.addEventListener("scroll", event => {
      let fromTop = window.scrollY;
      mainNavLinks.forEach(link => {
        let section = document.querySelector(link.hash);
        if (
          section.offsetTop <= fromTop*1.01 &&
          section.offsetTop + section.offsetHeight > fromTop*1.01
        ) {
          link.classList.add("current-nav-link");
        } else {
          link.classList.remove("current-nav-link");
        }
      });
    });

    let mainNavSubLinks = document.querySelectorAll(".navigation .sub-links");

    window.addEventListener("scroll", event => {
      let fromTop = window.scrollY;
      mainNavSubLinks.forEach(subLinkDiv => {
        let hash = subLinkDiv.getAttribute('hash');
        let section = document.querySelector(hash);

        if (
          section.offsetTop <= fromTop*1.01 &&
          section.offsetTop + section.offsetHeight > fromTop*1.01
        ) {
          subLinkDiv.classList.remove("hidden");
        } else {
          if (document.querySelector("#search").value.length == 0) {
            subLinkDiv.classList.add("hidden");
          }
        }
      });
    });

    const search = query => {
      if (query.length > 0) {
        query = query.toLowerCase();

        mainNavSubLinks.forEach(subLinkDiv => { subLinkDiv.classList.remove("hidden"); })

        var filtered_links = Array.from(mainNavLinks).filter(link => link.hash.toLowerCase().includes(query))
        filtered_include_parent = Array.from(filtered_links);

        filtered_links.forEach(link => {
          if (link.parentElement.classList.contains("sub-links")) {
            let id = link.parentElement.getAttribute('hash');
            mainNavLinks.forEach(mainLink => {
              if (mainLink.hash == id) {
                filtered_include_parent.push(mainLink);
              }
            });
        };
        })
      } else {

        mainNavSubLinks.forEach(subLinkDiv => { subLinkDiv.classList.add("hidden"); })

        var filtered_include_parent = Array.from(mainNavLinks);
      }

      mainNavLinks.forEach(link => {
        if (filtered_include_parent.includes(link)) {
          link.classList.remove("hidden");
        } else {
          link.classList.add("hidden");
        }
      })
      }

      document.addEventListener('keydown', function (e) {
        if (e.key.toLowerCase() === 'k' && (e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            document.getElementById('search').focus();
        }
        if (e.key == 'Escape') {
            document.getElementById('search').value = '';
            document.getElementById('search').blur();
            search('');
        }
      })

    function removeFooters() {
      document.querySelectorAll('.embedded-component gradio-app').forEach(g => {
          if ( g.shadowRoot ) {
            let shadowroot = g.shadowRoot;
            let f = shadowroot.querySelector('footer');
            if (f != null) {
              f.classList.add('hidden');
              let c = shadowroot.querySelector('.gradio-container');
              c.style.removeProperty('min-height');
            } else {
              window.setTimeout(removeFooters, 100);
            }
          } else {
            window.setTimeout(removeFooters, 100);
          }
          
        });
      };
   
    window.addEventListener('load', removeFooters());

  </script>
  </body>
</html>
